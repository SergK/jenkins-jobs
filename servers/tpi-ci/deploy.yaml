- project:
    name: deploy
    plugin_name:
      - contrail:
          email_to: omartsyniuk@mirantis.com, vstruk@mirantis.com
#      - vpnass:
#          email_to: aepifanov@mirantis.com
#      - fwaas:
#          email_to: aepifanov@mirantis.com
#      - lma:
#          email_to: tnurlygayanov@mirantis.com, ppetit@mirantis.com, spasquier@mirantis.com
#      - eskibana:
#          email_to: tnurlygayanov@mirantis.com, ppetit@mirantis.com, spasquier@mirantis.com
#      - zabbix:
#          email_to: dklenov@mirantis.com, dkalashnik@mirantis.com, pmisiak@mirantis.com
#      - emc:
#          email_to: dklenov@mirantis.com, dkalashnik@mirantis.com, pmisiak@mirantis.com
    jobs:
      - '{plugin_name}.deploy'

- job-template:
    name: '{plugin_name}.deploy'
    workspace: '/home/jenkins/fuel-qa'
    builders:
      - copyartifact:
          project: '{plugin_name}.build'
          which-build: last-successful
      - shell:
          !include-raw './builders/deploy-plugin.sh'
    description: 'Deploy {plugin_name} plugin to prepared environment'
    logrotate:
      numToKeep: 10
    node: tpi71
    publishers:
      - email:
          notify-every-unstable-build: true
          recipients: 'khontar@mirantis.com, {email_to}'
