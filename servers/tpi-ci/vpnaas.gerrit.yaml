- job:
    name: vpnaas.gerrit
    builders:
      - shell:
          !include-raw './builders/build-vpnaas-plugin.sh'
    description: '<a href=https://git.openstack.org/stackforge/fuel-plugin-neutron-vpnaas>Build VPNaaS plugin from fuel-plugins project</a>'
    logrotate:
      numToKeep: 10
    node: tpi71
    scm:
      - git:
          branches:
            - $GERRIT_BRANCH
          name: ''
          refspec: $GERRIT_REFSPEC
          url: 'https://review.openstack.org/stackforge/fuel-plugin-neutron-vpnaas'
          choosing-strategy: gerrit
          skip-tag: true
          wipe-workspace: false
    triggers:
      - gerrit:
          trigger-on:
            - patchset-created-event:
                exclude-drafts: true
                exclude-trivial-rebase: true
                exclude-no-code-change: true
          projects:
            - project-compare-type: 'PLAIN'
              project-pattern: 'stackforge/fuel-plugin-neutron-vpnaas'
              branches:
                - branch-compare-type: 'ANT'
                  branch-pattern: '**'
          skip-vote:
            successful: true
            failed: true
            unstable: true
            notbuilt: true
          silent: true
          escape-quotes: true
          trigger-for-unreviewed-patches: true
          server-name: 'review.openstack.org'
    publishers:
      - archive:
          artifacts: '*.rpm'
      - email:
          notify-every-unstable-build: true
          recipients: khontar@mirantis.com, aepifanov@mirantis.com
