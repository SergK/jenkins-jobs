- job-template:
    name: '{version-id}.staging.centos.bvt_1'
    builders:
      - systest
    concurrent: true
    description: '{description}'
    logrotate:
      daysToKeep: 30
    node: custom_bvt
    properties:
      - heavy-job:
          weight: 8
      - throttle:
          max-per-node: 1
          option: project
    parameters:
      - systest:
          dist: CentOS
          testgroup: bvt_1
          version-id: '{version-id}'
          id: '{id}'
    publishers:
      - nosetests
      - email-default:
          mail-to: devops+alert@mirantis.com,fuel-osci@mirantis.com,mos-qa@mirantis.com
      - trigger-parameterized-builds:
        - project: fuel_build_reports
          condition: UNSTABLE_OR_BETTER
          predefined-parameters: |
            RELEASE={release}
            BUILD=fuel-{version-id}-{status-build-number}
            STAGE=bvt_1
            VALUE=ok
            REPORTED_JOB_URL=$BUILD_URL
        - project: fuel_build_reports
          condition: FAILED
          predefined-parameters: |
            RELEASE={release}
            BUILD=fuel-{version-id}-{status-build-number}
            STAGE=bvt_1
            VALUE=fail
            REPORTED_JOB_URL=$BUILD_URL
    scm:
      - stackforge:
          branch: '{branch}'
          repo: fuel-main
    wrappers:
      - timeout:
          timeout: 210
