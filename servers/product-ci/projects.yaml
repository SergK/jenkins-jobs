- project:
    name: 6.1
    version-id: 6.1
    branch: master
    base-version: 6.0
    jobs:
      - 6.1.main
      - 6.1.staging
- job-group:
    name: 6.1.main
    id: main
    jobs:
      - '{version-id}.all':
          timer: 'H 22 * * *'
          trigger-builds: 'deploy_iso_on_cachers,6.1.centos.smoke_nova,6.1.ubuntu.smoke_neutron,6.1.centos.bvt_1,6.1.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1'
      - '{version-id}.ubuntu.bvt_2'
      - '{version-id}.centos.smoke_nova'
      - '{version-id}.ubuntu.smoke_neutron'
- job-group:
    name: 6.1.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          extra-deb-repos: 'http://mirrors-local-msk.msk.mirantis.net/ubuntu-security-6.1/ precise-security main universe multiverse restricted'
          timer: 'H 7 * * *'
      - '{version-id}.staging.iso'
      - '{version-id}.staging.centos.bvt_1'
      - '{version-id}.staging.ubuntu.bvt_2'
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: master
    version-id: master
    branch: master
    base-version: 5.1.1
    jobs:
      - master.main
      - master.staging
- job-group:
    name: master.main
    id: main
    jobs:
      - '{version-id}.all':
          timer: 'H 22 */3 * *'
          trigger-builds: 'deploy_iso_on_cachers,master.smoke,master.centos.bvt_1,master.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1'
      - '{version-id}.ubuntu.bvt_2'
      - '{version-id}.smoke'
- job-group:
    name: master.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          extra-deb-repos: ''
          timer: 'H 7 */3 * *'
      - '{version-id}.staging.iso'
      - '{version-id}.staging.centos.bvt_1'
      - '{version-id}.staging.ubuntu.bvt_2'
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: 5.1.2
    version-id: 5.1.2
    branch: stable/5.1
    base-version: 5.1
    jobs:
      - 5.1.2.main
      - 5.1.2.staging
- job-group:
    name: 5.1.2.main
    id: main
    jobs:
      - '{version-id}.all':
          timer: 'H 20 * * *'
          trigger-builds: 'deploy_iso_on_cachers,5.1.2.smoke,5.1.2.centos.bvt_1,5.1.2.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1'
      - '{version-id}.ubuntu.bvt_2'
      - '{version-id}.smoke'
- job-group:
    name: 5.1.2.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          extra-deb-repos: 'http://mirrors-local-msk.msk.mirantis.net/ubuntu-security-5.1.2/ precise-security main universe multiverse restricted'
          timer: 'H 5 * * *'
      - '{version-id}.staging.iso'
      - '{version-id}.staging.centos.bvt_1'
      - '{version-id}.staging.ubuntu.bvt_2'
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: 6.0.1
    version-id: 6.0.1
    branch: stable/6.0
    base-version: 5.1.1
    jobs:
      - 6.0.1.main
      - 6.0.1.staging

- job-group:
    name: 6.0.1.main
    id: main
    jobs:
      - '{version-id}.all':
          timer: 'H 20 * * *'
          trigger-builds: 'deploy_iso_on_cachers,6.0.1.smoke,6.0.1.centos.bvt_1,6.0.1.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1'
      - '{version-id}.ubuntu.bvt_2'
      - '{version-id}.smoke'
- job-group:
    name: 6.0.1.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          extra-deb-repos: 'http://mirrors-local-msk.msk.mirantis.net/ubuntu-security-6.0.1/ precise-security main universe multiverse restricted'
          timer: 'H 5 * * *'
      - '{version-id}.staging.iso'
      - '{version-id}.staging.centos.bvt_1'
      - '{version-id}.staging.ubuntu.bvt_2'
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'



- job-group:
    name: '{version-id}-system_tests-upgrades'
    id: 'system_test'
    node: 'systest'
    timeout: '480'
    jobs:
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}':
          testgroup: 'deploy_neutron_gre_ha'
          upgrade_testgroup: 'upgrade'
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}':
          testgroup: 'ceph_multinode_compact'
          upgrade_testgroup: 'upgrade'
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}':
          testgroup: 'deploy_neutron_gre_ha'
          upgrade_testgroup: 'rollback'
          weight: '8'
      - '{version-id}.{id}.{dist}.{testgroup}.{upgrade_testgroup}':
          testgroup: 'deploy_neutron_gre'
          upgrade_testgroup: 'rollback'
          weight: '8'
