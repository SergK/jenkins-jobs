- project:
    name: 6.1
    version-id: 6.1
    branch: master
    base-version: 6.0
    data-magnet-link:
       !include-raw data/6.0-artifacts
    jobs:
      - 6.1.main
      - 6.1.staging
- job-group:
    name: 6.1.main
    id: main
    jobs:
      - '{version-id}.all':
          make-args: ''
          timer: 'H 22 * * *'
          trigger-builds: 'deploy_iso_on_cachers,6.1.centos.smoke_nova,6.1.ubuntu.smoke_neutron,6.1.centos.bvt_1,6.1.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1':
          description:
            !include-raw descriptions/centos.bvt_1
      - '{version-id}.ubuntu.bvt_2':
          description:
            !include-raw descriptions/ubuntu.bvt_2
          custom-parameters: |
            NEUTRON_ENABLE=true
      - '{version-id}.centos.smoke_nova'
      - '{version-id}.ubuntu.smoke_neutron'
- job-group:
    name: 6.1.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          repo: '6.1-stable'
          extra-deb-repos: 'http://mirrors-local-msk.msk.mirantis.net/ubuntu-security-6.1/ precise-security main universe multiverse restricted'
          timer: 'H 7 * * *'
      - '{version-id}.staging.iso':
          make-args: ''
      - '{version-id}.staging.centos.bvt_1':
          description:
            !include-raw descriptions/staging.centos.bvt_1
      - '{version-id}.staging.ubuntu.bvt_2':
          description:
            !include-raw descriptions/staging.ubuntu.bvt_2
          custom-parameters: |
            NEUTRON_ENABLE=true
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: 6.1-ubuntu
    version-id: 6.1-ubuntu
    branch: master
    base-version: 6.1
    jobs:
      - 6.1-ubuntu.ubuntu_upstream
- job-group:
    name: 6.1-ubuntu.ubuntu_upstream
    id: ubuntu_upstream
    jobs:
      - '{version-id}.test_ubuntu_upstream_mirror':
          timer: 'H 7 * * *'
      - '{version-id}.staging.iso':
          make-args: ''
      - '{version-id}.staging.ubuntu.bvt_2':
          description:
            !include-raw descriptions/staging.ubuntu.bvt_2
          custom-parameters: |
            NEUTRON_ENABLE=true
      - '{version-id}.set_ubuntu_stable_mirror'

- project:
    name: master
    version-id: master
    branch: master
    base-version: 5.1.1
    data-magnet-link: ''
    jobs:
      - master.main
      - master.staging
- job-group:
    name: master.main
    id: main
    jobs:
      - '{version-id}.all':
          make-args: ''
          timer: 'H 23 * * *'
          trigger-builds: 'deploy_iso_on_cachers,master.smoke,master.centos.bvt_1,master.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1':
          description:
            !include-raw descriptions/centos.bvt_1
      - '{version-id}.ubuntu.bvt_2':
          description:
            !include-raw descriptions/ubuntu.bvt_2
          custom-parameters: |
            NEUTRON_ENABLE=true
      - '{version-id}.smoke'
- job-group:
    name: master.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          repo: 'master'
          extra-deb-repos: ''
          timer: 'H 7 */3 * *'
      - '{version-id}.staging.iso':
          make-args: ''
      - '{version-id}.staging.centos.bvt_1':
          description:
            !include-raw descriptions/staging.centos.bvt_1
      - '{version-id}.staging.ubuntu.bvt_2':
          description:
            !include-raw descriptions/staging.ubuntu.bvt_2
          custom-parameters: |
            NEUTRON_ENABLE=true
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: 5.1.2
    version-id: 5.1.2
    branch: stable/5.1
    base-version: 5.1
    data-magnet-link: ''
    jobs:
      - 5.1.2.main
      - 5.1.2.staging
- job-group:
    name: 5.1.2.main
    id: main
    jobs:
      - '{version-id}.all':
          make-args: ''
          timer: 'H 20 * * *'
          trigger-builds: 'deploy_iso_on_cachers,5.1.2.smoke,5.1.2.centos.bvt_1,5.1.2.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1':
          description:
            !include-raw descriptions/centos.bvt_1-legacy
      - '{version-id}.ubuntu.bvt_2':
          description:
            !include-raw descriptions/ubuntu.bvt_2-legacy
          custom-parameters: ''
      - '{version-id}.smoke'
- job-group:
    name: 5.1.2.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          repo: '5.1.2-stable'
          extra-deb-repos: 'http://mirrors-local-msk.msk.mirantis.net/ubuntu-security-5.1.2/ precise-security main universe multiverse restricted'
          timer: 'H 5 * * *'
      - '{version-id}.staging.iso':
          make-args: ''
      - '{version-id}.staging.centos.bvt_1':
          description:
            !include-raw descriptions/staging.centos.bvt_1-legacy
      - '{version-id}.staging.ubuntu.bvt_2':
          description:
            !include-raw descriptions/staging.ubuntu.bvt_2-legacy
          custom-parameters: ''
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: 6.0.1
    version-id: 6.0.1
    branch: stable/6.0
    base-version: 5.1.1
    data-magnet-link: ''
    jobs:
      - 6.0.1.main
      - 6.0.1.staging

- job-group:
    name: 6.0.1.main
    id: main
    jobs:
      - '{version-id}.all':
          make-args: ''
          timer: 'H 20 * * *'
          trigger-builds: 'deploy_iso_on_cachers,6.0.1.smoke,6.0.1.centos.bvt_1,6.0.1.ubuntu.bvt_2'
      - '{version-id}.centos.bvt_1':
          description:
            !include-raw descriptions/centos.bvt_1-legacy
      - '{version-id}.ubuntu.bvt_2':
          description:
            !include-raw descriptions/ubuntu.bvt_2-legacy
          custom-parameters: ''
      - '{version-id}.smoke'
- job-group:
    name: 6.0.1.staging
    id: staging
    jobs:
      - '{version-id}.build_staging_mirror':
          repo: '6.0.1-stable'
          extra-deb-repos: 'http://mirrors-local-msk.msk.mirantis.net/ubuntu-security-6.0.1/ precise-security main universe multiverse restricted'
          timer: 'H 5 * * *'
      - '{version-id}.staging.iso':
          make-args: ''
      - '{version-id}.staging.centos.bvt_1':
          description:
            !include-raw descriptions/staging.centos.bvt_1-legacy
      - '{version-id}.staging.ubuntu.bvt_2':
          description:
            !include-raw descriptions/staging.ubuntu.bvt_2-legacy
          custom-parameters: ''
      - '{version-id}.set_stable_mirror'
      - '{version-id}.test_staging_mirror'

- project:
    name: custom_iso
    jobs:
      - 'custom_{version-id}_iso':
          version-id: 5.0
          branch: stable/5.0
      - 'custom_{version-id}_iso':
          version-id: 5.1
          branch: stable/5.1
      - 'custom_{version-id}_iso':
          version-id: 6.0
          branch: stable/6.0
      - 'custom_{version-id}_iso':
          version-id: 6.1
          branch: master
      - 'custom_trusty_{version-id}_iso':
          version-id: 6.1
          branch: master
