- job-template:
    # FIXME: mirror_update logic should be implemented on JJB level
    name: 'mirror-local-{name}'
    node: '{node}'
    concurrent: false

    scm:
      - main:
          name: 'infra/mirrors'

    builders:
      - shell: 'bash -x mirror_update.sh {name}'


    publishers:
      - description-setter:
          regexp: "^Synced.*a href.*"

- job-template:
    name: 'mirror-local-{name}-freeze'
    node: '{node}'

    parameters:
      - string:
          name: VERSION
          description: "Version to freeze"

    concurrent: false

    builders:
      - mirror-freeze

    publishers:
      - description-setter:
          regexp: "Freezed.*a href.*"

